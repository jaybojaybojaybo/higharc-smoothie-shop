import{o as w,c as k,d as P,t as I,i as O,a as E,b as ie,e as N,G as le,M as ne,D as oe,C as B,f as V,r as m,V as W,w as ae,W as ce,s as de,R as ue,g as me,P as pe,h as he,j as X,k as fe,l as ve,m as ge,S as Q,n as ye,H as Se,p as be,q as Z,u as we,v as xe,x as D,F as R,y as ee,z as T,A as _e,B as te,E as Ce}from"./vendor.eb97a757.js";const Me=function(){const o=document.createElement("link").relList;if(o&&o.supports&&o.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))r(a);new MutationObserver(a=>{for(const s of a)if(s.type==="childList")for(const u of s.addedNodes)u.tagName==="LINK"&&u.rel==="modulepreload"&&r(u)}).observe(document,{childList:!0,subtree:!0});function e(a){const s={};return a.integrity&&(s.integrity=a.integrity),a.referrerpolicy&&(s.referrerPolicy=a.referrerpolicy),a.crossorigin==="use-credentials"?s.credentials="include":a.crossorigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(a){if(a.ep)return;a.ep=!0;const s=e(a);fetch(a.href,s)}};Me();var M=(t,o)=>{const e=t.__vccOpts||t;for(const[r,a]of o)e[r]=a;return e};const ke={},De={class:"text-5xl font-bold py-5",id:"navbar"};function Ee(t,o){return w(),k("header",De,"Smoothie Shop")}var $e=M(ke,[["render",Ee]]);const Fe=P({props:{smoothie:{type:Object,required:!0},coord:{type:Object,required:!0},index:{type:Number,required:!1}},setup(t){const o=I(t,"smoothie"),e=I(t,"coord"),r=I(t,"index"),a=O("webGlScene"),s=O("css3dScene");function u(){new le().load("./Smoothie.glb",f=>{let c=f.scene;c.traverse(p=>{p instanceof ne&&(p.name=o.value.name,p.material.side=oe)}),c.name=r.value.toString(),c.scale.set(.2,.2,.2),c.position.copy(e.value),a.add(c);let v=`<h1 class="text-2xl font-bold text-white p-1">${o.value.name}</h1>`;const n=new DOMParser().parseFromString(v,"text/html");n.body.style.background=new B(47849).getStyle();let d=new V(n.body);d.name="smoothie_"+o.value.name,d.position.copy(e.value),d.position.y-=.2;const h=.007;d.scale.set(h,h,h),d.updateMatrix(),s.add(d)})}E(async()=>{console.log("CARD: mounting"),u()}),ie(()=>{console.log("CARD: updating: ",o.value.index),u()}),N(()=>{console.log("CARD: unmounting: ",o.value.name)})}});function Le(t,o,e,r,a,s){return null}var Ae=M(Fe,[["render",Le]]);const Ie=[{name:"Than",ingredients:[{name:"Milk",type:"Dairy"},{name:"Blueberries",type:"Fruit"}]},{name:"Never",ingredients:[{name:"Oat Milk",type:"Non-Dairy"},{name:"Banana",type:"Fruit"},{name:"Cacao",type:"Add-On"}]},{name:"Better",ingredients:[{name:"Oat Milk",type:"Non-Dairy"},{name:"Blueberries",type:"Fruit"}]},{name:"Late",ingredients:[{name:"Oat Milk",type:"Non-Dairy"},{name:"Blueberries",type:"Fruit"}]}],Re=[{name:"Milk",type:"Dairy"},{name:"Yogurt",type:"Dairy"},{name:"Oat Milk",type:"Non-Dairy"},{name:"Almond Milk",type:"Non-Dairy"},{name:"Cashew Milk",type:"Non-Dairy"},{name:"Hemp Milk",type:"Non-Dairy"},{name:"Blueberries",type:"Fruit"},{name:"Strawberies",type:"Fruit"},{name:"Raspberries",type:"Fruit"},{name:"Banana",type:"Fruit"},{name:"Apple",type:"Fruit"},{name:"Mango",type:"Fruit"},{name:"Avocado",type:"Fruit"},{name:"Spinach",type:"Vegetable"},{name:"Kale",type:"Vegetable"},{name:"Chia Seeds",type:"Add-on"},{name:"Spirulina",type:"Add-on"},{name:"Cacao",type:"Add-on"}];async function Oe(){return Ie}async function Pe(){return Re}const Ne=P({emits:["addSmoothie"],setup(t,{emit:o}){const e=O("css3dScene"),r=m([]),a=-2.7,s=0,u=1;async function l(){r.value=await Pe();let n=m("");for(let y of r.value){let x=String.raw`<div class="w-full px-3">
                        <input  id="${y.name}"
                                type="checkbox" 
                                class="form-checkbox h-4 w-4 border border-gray-300 bg-white checked:bg-blue-600 checked:border-blue-600 transition duration-200 mt-1 bg-no-repeat bg-center bg-contain mr-2 cursor-pointer"
                        >
                        <span for="${y.name}" class="form-label inline-block ml-2">${y.name}</span>
                    </div>`;n.value+=x}let d=`<h1 class="text-2xl font-bold text-smoothie-blue">New Smoothie</h1>
                <div class="justify-center flex text-white">
                    <form class="max-w-xs" id="smoothie-form">
                        <label class="items-center my-2">
                            <span for="name" class="text-white font-semibold">Smoothie Name: </span>
                            <input type="text" class="mt-1 block w-md text-black text-center px-5" id="name">
                        </label>
                        <span class="text-smoothie-blue font-semibold">Ingredients:</span>
                        <label class="items-center">`+n.value+`</label>
                        <button type="button"
                                class="bg-gray-300 hover:bg-smoothie-blue text-gray-800 hover:text-white font-bold py-2 px-4 my-2 rounded-l"
                        >
                            Add New Smoothie
                        </button>
                    </form>
                </div>`;const h=new DOMParser().parseFromString(d,"text/html");h.body.style.background=new B(0).getStyle();let p=new V(h.body);p.name="addForm",p.position.copy(new W(a,s,u));const g=.007;p.scale.set(g,g,g),p.element.addEventListener("mousedown",f,!0),e.add(p)}E(async()=>{l()}),N(()=>{console.log("AddForm unmounting: ",e.children);for(let n=e.children.length-1;n>=0;n--)e.children[n].name.includes("add")&&(console.log("removing child"),e.remove(e.children[n]))});function f(n){var d,h;console.log("handling click in add smoothie form: ",n.target),n.preventDefault(),n.target.type==="checkbox"?(n.stopImmediatePropagation(),(d=document.getElementById(n.target.id))==null||d.toggleAttribute("checked")):n.target.type==="text"?(n.stopImmediatePropagation(),(h=document.getElementById(n.target.id))==null||h.focus()):n.target.type==="button"&&(n.stopImmediatePropagation(),c(),v())}let c=()=>{const n={name:"",ingredients:[]};if(n.name=document.getElementById("name").value,r.value)for(let h of r.value)document.getElementById(h.name).checked&&n.ingredients.push(h);m(document.getElementById("smoothie-form")).value.reset(),o("addSmoothie",n)},v=()=>{for(let n of r.value)document.getElementById(n.name).checked=!1};return{handleClick:f,addFormInit:l}}});function Be(t,o,e,r,a,s){return null}var qe=M(Ne,[["render",Be]]);const ze=P({props:{smoothie:{type:Object,required:!0}},emits:["closeSelectedSmoothie","deleteSmoothie"],setup(t,{emit:o}){const e=I(t,"smoothie"),r=O("css3dScene");m([]);const a=m(""),s=m({}),u=-2.7,l=0,f=1;async function c(n){console.log("7");let d=m("");for(let g of n.ingredients){let y=String.raw`<div class="w-full px-3">                        
                        <span class="form-label ml-2">${g.name}</span>
                    </div>`;d.value+=y}a.value=`<h1 class="text-2xl font-bold text-smoothie-blue">Name: <span class="text-white">${n.name}</span></h1>
                <div class="justify-center flex text-white">
                    <h2 class="text-lg font-semibold text-smoothie-blue block">Ingredients: </h2>`+d.value+`</div>
                <button type="button"
                        class="bg-gray-300 hover:bg-red-600 text-gray-800 hover:text-white font-bold py-2 px-4 my-2 rounded-l">
                    DELETE SMOOTHIE
                </button>`;const h=new DOMParser().parseFromString(a.value,"text/html");h.body.style.background=new B(0).getStyle(),s.value=new V(h.body),s.value.position.copy(new W(u,l,f));const p=.007;s.value.scale.set(p,p,p),s.value.element.addEventListener("mousedown",v,!0),r.add(s.value)}ae(()=>e.value,n=>{c(n)}),E(async()=>{c(e.value)}),N(()=>{var n;console.log("Details unmounting"),(n=s.value.parent)==null||n.remove(s.value),s.value.element.removeEventListener("click",v)});function v(n){console.log("handling click in details display: ",n.target),n.preventDefault(),n.target.type==="button"&&(n.stopImmediatePropagation(),o("deleteSmoothie",e.value))}return{handleClick:v,detailsFormInit:c}}});function He(t,o,e,r,a,s){return null}var je=M(ze,[["render",He]]);function Ge(t,o){const e=new ce({antialias:!0});return e.setSize(t,o),e.setPixelRatio(Math.min(window.devicePixelRatio,2)),e.physicallyCorrectLights=!0,e.outputEncoding=de,e.toneMapping=ue,e.toneMappingExposure=12,e}function Te(t,o,e){const r=new me;return r.setSize(t,o),r.domElement.style.position="absolute",r.domElement.style.top=e+"px",r}function Ve(t,o,e){const a=o/e,s=.1,u=1500,l=new pe(50,a,s,u),f=0,c=0,v=8;return l.position.set(f,c,v),l.lookAt(0,0,0),l.updateProjectionMatrix(),l.name="perspCamera",l}function We(t,o){const e=m(new he(t,o));return t.type==="PerspectiveCamera"&&(e.value.enableDamping=!0,e.value.dampingFactor=.05,e.value.screenSpacePanning=!1,e.value.minDistance=.1,e.value.maxDistance=1e3,e.value.enableRotate=!0,e.value.enablePan=!0,e.value.minPolarAngle=X.degToRad(0),e.value.maxPolarAngle=X.degToRad(89)),e}function Ue(){const t=m(new fe),o=m(new ve);return{raycasterRef:t,mouseRef:o}}function Je(t,o,e,r,a,s){const u=document.documentElement.clientHeight-e.value;t.value=document.documentElement.clientWidth,o.value=u;const l=t.value/o.value;r.aspect=l,r.updateProjectionMatrix(),a.setSize(t.value,o.value),s.setSize(t.value,o.value),a.setPixelRatio(Math.min(window.devicePixelRatio,2))}function Ke(t,o){t.addEventListener("mousemove",e=>{o.x=e.offsetX/t.clientWidth*2-1,o.y=-(e.offsetY/t.clientHeight)*2+1})}function Ye(t,o,e,r,a,s){var f,c,v,n,d;t.preventDefault();let u=o.value.intersectObjects(e.children,!0),l=!0;if(u.length>0)for(const h of u){let p=(n=(v=(c=(f=h.object.parent)==null?void 0:f.parent)==null?void 0:c.parent)==null?void 0:v.parent)==null?void 0:n.parent;if(p&&p instanceof ge){a.value.length&&s(!l),(d=a.value)==null||d.push(r.value[parseInt(p.name)]);break}else s(l);u=[]}else s(l)}const Xe=P({components:{SmoothieCard:Ae,AddSmoothieForm:qe,SmoothieDetails:je},setup(){var K;const t=m([]),o=m([]),e=m(0),r=m([]),a=m(),s=m(),u=m(),l=m(!0),f=i=>{t.value.push(i),l.value=!1,console.log("adding smoothie!",t.value),F()};function c(i){l.value=i,r.value.length=0}const v=i=>{l.value=!0,console.log("LIST: deleted Smoothie: ",i);let S=t.value.indexOf(i);console.log("LIST: smoothieList after delete: ",t.value),H(),t.value.splice(S,1),F()},n=new Q;n.background=new B(2236962);const d=new Q,h=new ye("#0033cc",5);n.add(h);const p=new Se(794779,794779,1);n.add(p);const g=m(document.querySelector("#navbar")?(K=document.querySelector("#navbar"))==null?void 0:K.clientHeight:0),y=m(document.documentElement.clientWidth),x=m(document.documentElement.clientHeight-g.value),$=Ge(y.value,x.value),b=Te(y.value,x.value,g.value),_=be(Ve(e.value,y.value,x.value)),se=We(_,b.domElement),{raycasterRef:q,mouseRef:z}=Ue();q.value.setFromCamera(z.value,_);function re(i){l.value=!1,Ye(i,q,n,t,r,c)}b.domElement.addEventListener("click",re,!0);function H(){for(let i=n.children.length-1;i>=0;i--)(n.children[i].type==="Group"||n.children[i].name.includes("shopWall"))&&n.remove(n.children[i]);for(let i=d.children.length-1;i>=0;i--)d.children[i].name.includes("smoothie")&&d.remove(d.children[i])}function F(){for(let L of t.value)L.index=t.value.indexOf(L);e.value=Math.round(Math.sqrt(t.value.length));let i=new we(e.value*2,e.value*2),S=new xe({color:11574369,side:oe}),C=new ne(i,S);C.name="shopWall",C.position.z=-5,n.add(C),o.value.length=0,o.value=t.value.map(L=>{let A,j,Y;A=j=Y=0;const G=t.value.indexOf(L);return console.log("gridsize: ",e.value),e.value>1?(A=G%e.value-Math.ceil(e.value/2)/2,j=Math.floor(G/e.value)-e.value/2):e.value===1&&(A=(G+1)/e.value-e.value*1.5),new W(A,j,Y)}),console.log("listInit points: ",o.value)}ae(()=>e.value,i=>{H(),F()});const U=()=>{se.value.update(),q.value.setFromCamera(z.value,_),$.render(n,_),b.render(d,_),window.requestAnimationFrame(U)};function J(){Je(y,x,g,_,$,b)}return Z("webGlScene",n),Z("css3dScene",d),E(async()=>{var i,S,C;t.value=window.localStorage.getItem("smoothies")&&typeof window.localStorage.getItem("smoothies")=="string"?JSON.parse(window.localStorage.getItem("smoothies")):await Oe(),g.value=document.querySelector("#navbar")?(i=document.querySelector("#navbar"))==null?void 0:i.clientHeight:0,(S=document.querySelector("#app"))==null||S.append($.domElement),b.domElement.id="css3DRenderer",(C=document.querySelector("#app"))==null||C.append(b.domElement),Ke(b.domElement,z.value),window.addEventListener("resize",J,!0),F(),U()}),N(()=>{var i,S;(i=document.querySelector("#app"))==null||i.removeChild($.domElement),(S=document.querySelector("#app"))==null||S.removeChild(b.domElement),window.removeEventListener("resize",J,!0),window.localStorage.setItem("smoothies",JSON.stringify(t.value)),H()}),{smoothieList:t,smoothiePoints:o,onAddSmoothie:f,onClearSelectedSmoothie:c,onDeleteSmoothie:v,selectedSmoothies:r,card:a,addForm:s,details:u,addMode:l,scene:n,css3dScene:d}}});function Qe(t,o,e,r,a,s){const u=D("SmoothieCard"),l=D("AddSmoothieForm"),f=D("SmoothieDetails");return w(),k(R,null,[(w(!0),k(R,null,ee(t.smoothieList,c=>(w(),T(u,{key:c.index,smoothie:c,index:c.index,coord:t.smoothiePoints[t.smoothieList.indexOf(c)],ref_for:!0,ref:"card"},null,8,["smoothie","index","coord"]))),128)),t.addMode?(w(),T(l,{key:0,onAddSmoothie:t.onAddSmoothie,ref:"addForm"},null,8,["onAddSmoothie"])):_e("",!0),(w(!0),k(R,null,ee(t.selectedSmoothies,(c,v)=>(w(),T(f,{key:c.name,smoothie:c,onCloseSelectedSmoothie:t.onClearSelectedSmoothie,onDeleteSmoothie:t.onDeleteSmoothie,ref_for:!0,ref:"details"},null,8,["smoothie","onCloseSelectedSmoothie","onDeleteSmoothie"]))),128))],64)}var Ze=M(Xe,[["render",Qe]]);const et={components:{Navbar:$e,SmoothieList:Ze},setup(){E(()=>{console.log("smoothie shop is open!")})}};function tt(t,o,e,r,a,s){const u=D("Navbar"),l=D("SmoothieList");return w(),k(R,null,[te(u),te(l)],64)}var nt=M(et,[["render",tt]]);Ce(nt).mount("#app");
